---
source: crates/normalize/tests/cli_snapshots.rs
assertion_line: 72
expression: "snapshot_help(&[\"analyze\"])"
---
Analyze codebase (health, complexity, security, duplicates, docs)

Usage: normalize analyze [OPTIONS] [COMMAND]

Commands:
  health               Run health analysis (file counts, complexity stats, large file warnings)
  architecture         Analyze codebase architecture: coupling, cycles, dependencies
  complexity           Run complexity analysis
  length               Run function length analysis
  security             Run security analysis
  docs                 Analyze documentation coverage
  files                Show longest files in codebase
  trace                Trace value provenance for a symbol
  callers              Show what functions call a symbol
  callees              Show what functions a symbol calls
  hotspots             Show git history hotspots (frequently changed files)
  coupling             Find files that frequently change together (temporal coupling)
  ownership            Show per-file ownership concentration from git blame
  contributors         Analyze contributors across repos (requires --repos)
  repo-coupling        Analyze cross-repo coupling: dependency graph + temporal signals (requires --repos)
  check-refs           Check documentation references for broken links
  stale-docs           Find documentation with stale code references
  check-examples       Check example references in documentation
  duplicate-functions  Detect duplicate functions (code clones)
  duplicate-blocks     Detect duplicate code blocks (subtree-level clone detection)
  similar-functions    Detect similar (fuzzy-matching) functions via MinHash LSH
  similar-blocks       Detect similar (fuzzy-matching) code blocks via MinHash LSH
  duplicate-types      Detect duplicate type definitions
  test-gaps            Find public functions with no direct test caller
  all                  Run all analysis passes
  ast                  Show AST for a file (for authoring syntax rules)
  query                Test a tree-sitter query against files
  rules                Run syntax rules from .normalize/rules/*.scm
  help                 Print this message or the help of the given subcommand(s)

Options:
      --repos <DIR>         Run command across all git repos under DIR (1 level deep)
      --json                Output as JSON
      --jsonl               Output as JSON Lines (one object per line)
      --jq <EXPR>           Filter JSON output with jq expression (implies --json)
      --pretty              Human-friendly output with colors and formatting
      --compact             Compact output without colors (overrides TTY detection)
      --output-schema       Output JSON schema for the command's return type
      --input-schema        Output JSON schema for the command's input arguments
      --params-json <JSON>  Pass command arguments as JSON (overrides CLI args)
  -r, --root <ROOT>         Root directory (defaults to current directory)
      --exclude <PATTERN>   Exclude paths matching pattern or @alias
      --only <PATTERN>      Include only paths matching pattern or @alias
      --diff [<BASE>]       Analyze only files changed since base ref (e.g., main, HEAD~1) If no BASE given, defaults to origin's default branch
  -h, --help                Print help
