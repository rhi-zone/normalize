# Duplicate Types Allowlist
#
# CI runs: normalize analyze duplicate-types --min-overlap 90
#
# Threshold rationale:
# - Overlap is calculated as: common_fields / smaller_type_fields
# - Types with only 2 fields (like Position {line, column}) will 100% match
#   any type containing those fields, creating many false positives
# - 90% overlap catches genuinely duplicated domain types while filtering
#   coincidental matches from small utility types
# - Most flagged pairs are intentional: different views of same data,
#   Args/Config patterns, or domain types that naturally share fields
#
# To add entries, use the CLI (preferred):
#   normalize analyze duplicate-types --allow "TypeA" "TypeB" --reason "why they're distinct"
#
# Format: TypeA TypeB (one pair per line, # comments allowed)
# Order doesn't matter. Document why pairs are intentionally distinct.

# Different serialization contexts for same concept
Export SymbolInfo

# TypeScript runner aggregates all result fields
LintResult MossRunner

# Same API surface in TS vs Rust
LintResult ToolResult

# Fix is subset of Diagnostic
Diagnostic Fix

# Shared diagnostic fields
Diagnostic SecurityFinding

# Same SARIF schema
SarifReport SarifResult

# Runner aggregates location fields
Location MossRunner

# Runner aggregates tool result
MossRunner ToolResult

# Runner aggregates security fields
MossRunner SecurityFinding

# Different views of symbol data
Export IndexedSymbol

# Different views of symbol data
Export SearchResult

# External vs internal symbol representation
Export SymbolRecord

# Database vs API representation
SymbolInfo SymbolRecord

# Index vs HTTP API representation
IndexedSymbol SymbolInfo

# Search result vs info representation
SearchResult SymbolInfo

# Query subset of full info
PackageInfo PackageQuery

# Query fields in tree node
PackageQuery TreeNode

# Args merge with Config pattern
GrepArgs GrepConfig

# Weights subset of config
AnalyzeConfig AnalyzeWeights

# Args include weight fields
AnalyzeArgs AnalyzeWeights

# Coincidental name/version overlap
PackageQuery SarifDriver

# Coincidental name/version overlap
PackageQuery ToolListItem

# Feature is package substructure
Feature PackageInfo

# TreeNode displays package info
PackageInfo TreeNode

# Args extends config pattern
AnalyzeArgs AnalyzeConfig

# TS runner aggregates diagnostic fields
Diagnostic MossRunner

# Different index representations
IndexedSymbol SymbolRecord

# Search result for symbols
SearchResult SymbolRecord

# Both are symbol query results
IndexedSymbol SearchResult

# Different purposes: health reporting vs index metadata
IndexedFile LargeFile

# SymbolMatch adds file field for search results
FlatSymbol SymbolMatch

# Overview is superset of health metrics
HealthReport OverviewReport

# Nested vs flat representation by design
FlatSymbol Symbol

# User config vs static tool definition
CustomToolConfig ToolInfo

# Static definition vs CLI output format
ToolInfo ToolListItem

# Grouped vs per-name flattened by design
FlatImport Import

# Different semantics: import vs re-export
Import ReExport

# HTTP response vs index search result
SymbolDetailResponse SymbolMatch

# Analysis result shares symbol location fields
FlatSymbol FunctionComplexity

# Analysis result shares symbol location fields
FlatSymbol FunctionLength

# Symbol info shares location fields
FlatSymbol SymbolLocation

# Coincidental path/name/kind overlap
PackageSource SearchResult

# Coincidental path/name/kind overlap
PackageSource ViewNode

# Weights are subset of report fields
AnalyzeReport AnalyzeWeights

# HTTP vs index representation
IndexedSymbol SymbolMatch

# Coincidental name/kind/path overlap
SearchResult ViewNode

# Different metrics with shared location fields, over-engineering to unify
FunctionComplexity FunctionLength

# Location-based types naturally share line/column fields
Diagnostic OxlintPosition
MossRunner OxlintPosition
MossRunner EslintMessage
Symbol FunctionInfo
OxlintSpan PyrightRange
OxlintSpan BiomeSpan
OxlintSpan GrepMatch
OxlintPosition EslintMessage
OxlintPosition MypyDiagnostic
OxlintPosition Location
PyrightRange BiomeSpan
PyrightRange GrepMatch
BiomeSpan GrepMatch

# Coincidental dependency/version overlap
YarnEntry BunPackage
YarnEntry PackageInfo
YarnEntry TreeNode
BunPackage PackageQuery
BunPackage TreeNode
PackageQuery CliSpec
PackageInfo TestRunnerInfo
Feature TestRunnerInfo

# Span/range types share start/end fields (common pattern)
PyrightRange HighlightSpan
BiomeSpan HighlightSpan
HighlightSpan GrepMatch

# Coincidental 2-field overlaps from small types
TestRunnerInfo CliSpec
TestRunnerInfo CliCommand
FileLength LargeFile
ViewArgs ViewOpts
EditArgs BatchEditOp
TextSearchConfig TextSearchArgs
GrepArgs TextSearchConfig
GrepArgs TextSearchArgs
ParsedTree HighlightedFile
LlmConfig ModelConfig
NotebookCell ChunkResponse
FileIndex SymbolIndex
FileReexports FileSymbols
FileSymbols FileIndex
FileSymbols FileReexports
ViewNode ViewEntry
RulesConfig ToolConfig
AgentMessage AgentTask
RulesConfig EnabledRule
TextSearchArgs FileListQuery
MemoryItem BuiltinRule
ParsedTree HighlightedFile
HighlightedFile ParsedTree
IndexMetadata FileEntry
IndexMeta SearchMeta
FileIndex SymbolIndex

# Lua tree-sitter wrappers share internal state
LuaTree LuaNode

# LLM configs share model/provider fields
LlmClient NormalizeAgentSession

# Content-based types share id/content
Hunk BuiltinRule

# Server state types share index/root
AppState MossBackend

# File parsing results share symbol data
ExtractResult ParsedFileData

# Dependency extraction types (same domain)
ExtractedDeps DepsResult

# Index data types (same domain)
ParsedFileData CallGraphStats

# File metadata types share path/mtime
IndexedFile SessionFile

# Edit history types (nested structure)
HistoryEntry EditInfo

# Rule config types (same domain)
RuleOverride Rule

# parallel detection result types in same file; different domains (functions vs blocks)
DuplicateBlockGroup DuplicateFunctionGroup

# list-level vs detail-level plan representations; different consumer contexts
PlanInfo PlanListItem

# different modules/crates; AliasItem is CLI output, ResolvedAlias is filter library type
AliasItem ResolvedAlias

# HTTP response type vs Datalog fact type; cross-crate, different serialization contexts
IndexedSymbol SymbolFact

# FlatSymbol is typed public API (SymbolKind/Visibility enums); ParsedSymbol is private String-based staging struct before DB insertion
FlatSymbol ParsedSymbol

# block location in analyze vs Datalog fact; different crates/purposes
DuplicateBlockLocation SymbolRangeFact

# config structs for similar but distinct analysis passes; share most params by design
SimilarBlocksConfig SimilarFunctionsConfig

# PublicFunction for test-gap analysis, FunctionComplexity for complexity analysis; parallel but different
FunctionComplexity PublicFunction

# exact-duplicate vs fuzzy-similar config; share options by design, but different algorithm params
DuplicateFunctionsConfig SimilarFunctionsConfig

# HTTP response DTO vs Datalog relation; cross-domain
SymbolFact SymbolInfo

# export metadata in facts-core vs Datalog fact; different domains
Export SymbolFact

# view output type vs linter span; different crates and purposes
OxlintSpan ViewLineRangeReport

# view filter result vs HTTP index entry; different shapes in practice
IndexedSymbol ViewKindFilterEntry

# view filter result vs Datalog fact; cross-domain
SymbolFact ViewKindFilterEntry

# HTTP detail response vs Datalog range fact; cross-domain
SymbolDetailResponse SymbolRangeFact

# syntax rule override vs facts rule override; parallel config structs for different rule systems
FactsRuleOverride RuleOverride
